<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    HTTP 통신규약

http/0.9 : GET 메소드만 사용가능함(문서만 주고받으므로~)

http/1.0 : 정식사양으로 사용, RFC발행, POST 지원
상태코드가 추가됨(error 메시지, 성공메시지 등등)

비효율적인 비 연결지향... 
css, javascript의 사용으로 인해 효율성이 대두됨

http/1.0+ keep-alive 커넥션

http/1.1 keep-alive 커넥션 기본으로 지속연결 활성화
connection close 헤더를 통해 연결 종료

delete,put 메소드 추가

http/2.0 멀티플렉싱등 생겨남..

OSI 7 Layer

TCP/IP 계층 모델

TCP 신뢰성이 있음
1. 3-way hand shake
2. 출발지 ip port 등등 데이터를 주고받음

임의의 포트로 주어짐
목적지 ip, 목적지 port

비지속연결 지속연결

초기엔 지속연결이 필요가 없었지만
요즘은 다양한 js image파일등을 지속적으로 받아야하기 때문에
비 지속연결은 비효율적이다.

지속연결! - keep-Alive 연결을 지원..

Http 메시지 - 메시지 구조

요청메시지 무엇을 요청하는지
응답메시지 응답에 대한 결과

요청과 응답의 상태
<http 메시지 구조> 
1. request
2. response
각각은 개행문자로 구분(\r\n)
<시작줄>
어떻게 해야되는지
ex) POST/login.php HTTP/1.1
<메시지 헤더>
쿠키 : 값
ex1) Host : www.test.co.kr
ex2) Content-Type:application/x-www-form-urlencoded

<메시지 바디>바디와 헤더사이엔 개행문자가 2개잇어야됨
ex) id=test&pw=test123
post : 데이터 사용자 값을 실어서 보냄
get : 클라이언트에 자원을 실어서 보냄
개행 문자 http 프로토콜 cr+ LF
0x0D 0x0a ( \r\n)

HTTP 상태코드:
클라이언트에 요청에 대한 서버에서 상태결과를 알려주는걸 
말한다.

1XX:정보
2XX:성공
3XX:리다이렉션
4XX:클라이언트 에러
5XX:서버에러

200 OK
302 Found 다른 페이지로 이동
304 Not Modified
400 Bad Request
403 Foribidden 접근권한 없음
404 Not Found 존재x
500 Internal Server Error 서버 측 에러

<HTTP 메시지 헤더>

<따로 공부..>
일반헤더
요청헤더
응답헤더
엔티티 헤더
확장헤더

------------------------------------------------------------------------

★쿠키와 세션

쿠키 : 다른페이지에도 이동할 때 지속적인 접속을 유지하기 위해
접속을 하며 자신의 로그인 정보를 그대로 유지를 한다고 생각하면
된다.

쿠키 
1. 지속 쿠키(일반적인 쿠키)
웹 서버에서 발급시 하드디스크에 텍스트 형태로 저장이 됨
예전엔 보안적으로 클라이언트에 쿠키정보를 볼 수 있었지만
요세는 어플리캐이션에 보안적인 문제도 충분히 해결하고
내놓았기 때문에 문제없음

A사이트 로그인 시 - set-Cookie가 세팅이 됨
이후 A사이트에 다시 들어가면 Cookie를 클라이언트가 서버에 전달하게
되며 이때 Cookie값도 전달함

이후 로그아웃을 하게 된다면  서버가 클라이언트에게에게
Set-Cookie의 id값으로 deleted를 보내게 된다.
이를 통해 저장소에 쿠키가 없어지게 된다

쿠키의 경우 반드시 암호화과정이 필요하다!
무한정 사용하게끔하면 안되니 3시간이내까지만 사용가능하게
해야됨...
단방향인지 양방향인지 고려해야됨
물론 이중 양방향
쿠키값을 세팅할때 복호화시 어떤값인지 알아야함
이를 통해 복호화가 가능하게해야됨
암호화 복호화가 모두 가능해야되서 key값이 필요함
즉 이에서 3DES개념을 쓰게 된다...
개발자+보안담당자들끼리 로직설계를 함...

2. 세션 쿠키(세션)

set cookie를 통해 클라이언트 쿠키값이 세팅

abcd가 mapping정보로 기록이 된다면 너는 hong이구나라고 
기록이 되어있음

서버에 있는 세션정보안에 들어있는
의미없는 세션값에 id passwd값이 들어와있음

지속쿠키와는 다르게 서버에 있는 쿠키값을 지우게 됨
즉 폐기후 재사용에 대한 위협이 없게 된다.

but why 지속 쿠키를 사용하지?

세션쿠키를 하게 되면 메모리와 파일시스템에 과부화가 생길수잇고
DB를 하면 느리게 됨

지속쿠키를 하면 복호화만 하면되기떄문에 지속쿠키가 더 편리함

즉 웹 서비스 규모와 인프라 구성에 알맞게 사용해야됨...

</body>
</html>